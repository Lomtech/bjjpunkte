<!doctype html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BJJ Trainer Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=JetBrains+Mono:wght@400;500&family=Inter:wght@300;400;500&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- ‚ïê‚ïê‚ïê LOGIN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="screen-login" class="screen active">
      <div class="login-wrap">
        <div class="login-deco">
          <div class="deco-circle c1"></div>
          <div class="deco-circle c2"></div>
          <div class="deco-lines"></div>
        </div>
        <div class="login-box">
          <div class="brand">
            <span class="brand-mark">BJJ</span>
            <span class="brand-sub">TRAINER PORTAL</span>
          </div>
          <p class="login-hint">Nur f√ºr autorisierte Trainer</p>
          <div class="field-group">
            <label>E-Mail</label>
            <input type="email" id="login-email" placeholder="trainer@gym.de" />
          </div>
          <div class="field-group">
            <label>Passwort</label>
            <input type="password" id="login-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
          </div>
          <button class="btn-login" id="btn-login">Einloggen</button>
          <div id="login-msg" class="login-msg"></div>
        </div>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê APP ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="screen-app" class="screen">
      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="sidebar-brand">
          <span class="brand-mark sm">BJJ</span>
        </div>
        <nav class="sidebar-nav">
          <button class="nav-item active" data-view="dashboard">
            <span class="nav-icon">‚ñ¶</span>
            <span class="nav-label">Dashboard</span>
          </button>
          <button class="nav-item" data-view="athletes">
            <span class="nav-icon">‚óà</span>
            <span class="nav-label">Athleten</span>
          </button>
          <button class="nav-item" data-view="training">
            <span class="nav-icon">‚¨°</span>
            <span class="nav-label">Training</span>
          </button>
          <button class="nav-item" data-view="add-athlete">
            <span class="nav-icon">+</span>
            <span class="nav-label">Neu anlegen</span>
          </button>
        </nav>
        <div class="sidebar-footer">
          <span id="sidebar-trainer" class="trainer-name"></span>
          <button id="btn-logout" class="btn-logout-sm" title="Ausloggen">
            ‚èª
          </button>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="main-content">
        <!-- ‚îÄ‚îÄ VIEW: DASHBOARD ‚îÄ‚îÄ -->
        <div id="view-dashboard" class="view active">
          <div class="view-header">
            <h1>Dashboard</h1>
            <span id="dash-year" class="year-tag"></span>
          </div>

          <!-- Stat Cards -->
          <div class="stat-grid">
            <div class="stat-card accent">
              <div class="stat-num" id="stat-total-athletes">0</div>
              <div class="stat-lbl">Athleten gesamt</div>
            </div>
            <div class="stat-card">
              <div class="stat-num" id="stat-trainings-today">0</div>
              <div class="stat-lbl">Trainings heute</div>
            </div>
            <div class="stat-card">
              <div class="stat-num" id="stat-avg-points">0</div>
              <div class="stat-lbl">‚àÖ Punkte / Athlet</div>
            </div>
            <div class="stat-card">
              <div class="stat-num" id="stat-belt-ready">0</div>
              <div class="stat-lbl">G√ºrtel-bereit</div>
            </div>
          </div>

          <!-- Rangliste -->
          <div class="section-block">
            <div class="section-hd">
              <h2>Rangliste <span id="rank-year"></span></h2>
              <span class="section-sub">Punkte im laufenden Jahr</span>
            </div>
            <div id="ranking-list" class="ranking-list"></div>
          </div>

          <!-- G√ºrtel-bereit Banner -->
          <div
            class="section-block"
            id="belt-ready-section"
            style="display: none"
          >
            <div class="section-hd">
              <h2>üèÜ G√ºrtel-Aufstieg bereit</h2>
            </div>
            <div id="belt-ready-list" class="belt-ready-list"></div>
          </div>
        </div>

        <!-- ‚îÄ‚îÄ VIEW: ATHLETEN ‚îÄ‚îÄ -->
        <div id="view-athletes" class="view">
          <div class="view-header">
            <h1>Athleten</h1>
            <div class="header-actions">
              <input
                type="text"
                id="search-athletes"
                class="search-input"
                placeholder="Suchen‚Ä¶"
              />
            </div>
          </div>
          <div id="athletes-grid" class="athletes-grid"></div>
        </div>

        <!-- ‚îÄ‚îÄ VIEW: TRAINING ‚îÄ‚îÄ -->
        <div id="view-training" class="view">
          <div class="view-header">
            <h1>Training eintragen</h1>
          </div>

          <!-- Gruppen-Training -->
          <div class="training-block">
            <div class="block-hd">
              <h2>Gruppen-Training</h2>
              <span class="block-sub">Alle aktiven Athleten +1 Punkt</span>
            </div>
            <div class="group-training-row">
              <div class="field-group inline">
                <label>Datum</label>
                <input type="date" id="group-date" />
              </div>
              <button class="btn-group-training" id="btn-group-training">
                <span>Alle +1 Punkt</span>
                <span class="btn-count" id="group-athlete-count"
                  >0 Athleten</span
                >
              </button>
            </div>
          </div>

          <!-- Einzel-Eintrag -->
          <div class="training-block">
            <div class="block-hd">
              <h2>Einzel-Eintrag</h2>
              <span class="block-sub">F√ºr einen Athleten eintragen</span>
            </div>
            <div class="single-entry-form">
              <div class="field-group">
                <label>Athlet</label>
                <select id="single-athlete">
                  <option value="">‚Äî Athlet w√§hlen ‚Äî</option>
                </select>
              </div>
              <div class="entry-type-grid">
                <button
                  class="entry-type-btn active"
                  data-type="training"
                  data-points="1"
                >
                  <span class="et-icon">ü•ã</span>
                  <span class="et-label">Training</span>
                  <span class="et-pts">+1</span>
                </button>
                <button
                  class="entry-type-btn"
                  data-type="tournament"
                  data-points="50"
                >
                  <span class="et-icon">üèÖ</span>
                  <span class="et-label">Turnier</span>
                  <span class="et-pts">+50</span>
                </button>
                <button
                  class="entry-type-btn"
                  data-type="penalty"
                  data-points="-5"
                >
                  <span class="et-icon">‚ö†</span>
                  <span class="et-label">Verwarnung</span>
                  <span class="et-pts">‚àí5</span>
                </button>
                <button
                  class="entry-type-btn"
                  data-type="misconduct"
                  data-points="-20"
                >
                  <span class="et-icon">üö´</span>
                  <span class="et-label">Fehlverhalten</span>
                  <span class="et-pts">‚àí20</span>
                </button>
              </div>
              <div class="field-group">
                <label>Notiz (optional)</label>
                <input
                  type="text"
                  id="single-note"
                  placeholder="z.B. Turnier M√ºnchen, Verwarnung wegen‚Ä¶"
                />
              </div>
              <div class="field-group">
                <label>Datum</label>
                <input type="date" id="single-date" />
              </div>
              <button class="btn-primary" id="btn-single-entry">
                Eintragen
              </button>
            </div>
          </div>

          <!-- G√ºrtel vergeben -->
          <div class="training-block">
            <div class="block-hd">
              <h2>G√ºrtel vergeben</h2>
              <span class="block-sub">Athleten manuell hochstufen</span>
            </div>
            <div class="belt-promotion-form">
              <div class="field-group">
                <label>Athlet</label>
                <select id="belt-athlete">
                  <option value="">‚Äî Athlet w√§hlen ‚Äî</option>
                </select>
              </div>
              <div class="field-group">
                <label>Neuer G√ºrtel</label>
                <select id="belt-new">
                  <option value="white">Wei√ügurt</option>
                  <option value="blue">Blaugurt</option>
                  <option value="purple">Lillagurt</option>
                  <option value="brown">Braungurt</option>
                  <option value="black">Schwarzgurt</option>
                </select>
              </div>
              <button class="btn-primary belt-btn" id="btn-belt-promote">
                G√ºrtel vergeben ü•ã
              </button>
            </div>
          </div>
        </div>

        <!-- ‚îÄ‚îÄ VIEW: NEU ANLEGEN ‚îÄ‚îÄ -->
        <div id="view-add-athlete" class="view">
          <div class="view-header">
            <h1>Athlet anlegen</h1>
          </div>
          <div class="add-form-wrap">
            <div class="field-group">
              <label>Vollst√§ndiger Name</label>
              <input type="text" id="new-name" placeholder="Max Mustermann" />
            </div>
            <div class="field-group">
              <label>E-Mail (optional)</label>
              <input type="email" id="new-email" placeholder="max@example.de" />
            </div>
            <div class="field-group">
              <label>Aktueller G√ºrtel</label>
              <select id="new-belt">
                <option value="white">Wei√ügurt</option>
                <option value="blue">Blaugurt</option>
                <option value="purple">Lillagurt</option>
                <option value="brown">Braungurt</option>
                <option value="black">Schwarzgurt</option>
              </select>
            </div>
            <div class="field-group">
              <label>Geburtsjahr (optional)</label>
              <input
                type="number"
                id="new-birthyear"
                placeholder="1995"
                min="1950"
                max="2015"
              />
            </div>
            <button class="btn-primary" id="btn-add-athlete">
              Athlet anlegen
            </button>
            <div id="add-msg" class="add-msg"></div>
          </div>
        </div>
      </main>
    </div>

    <!-- ‚ïê‚ïê‚ïê MODAL: ATHLETEN-DETAIL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="modal-overlay" class="modal-overlay">
      <div class="modal">
        <button class="modal-close" id="modal-close">‚úï</button>
        <div class="modal-header">
          <div class="modal-belt-bar" id="modal-belt-bar"></div>
          <div>
            <h2 id="modal-name"></h2>
            <span id="modal-belt-label" class="modal-belt-label"></span>
          </div>
          <div class="modal-points-big" id="modal-points"></div>
        </div>
        <div class="modal-stats">
          <div class="mstat">
            <div class="mstat-val" id="ms-trainings">0</div>
            <div class="mstat-lbl">Trainings</div>
          </div>
          <div class="mstat">
            <div class="mstat-val" id="ms-tournaments">0</div>
            <div class="mstat-lbl">Turniere</div>
          </div>
          <div class="mstat">
            <div class="mstat-val" id="ms-penalties">0</div>
            <div class="mstat-lbl">Verwarnungen</div>
          </div>
        </div>
        <div class="modal-progress">
          <div class="progress-bar-outer">
            <div class="progress-bar-inner" id="modal-progress-bar"></div>
          </div>
          <div class="progress-meta">
            <span id="modal-progress-label"></span>
            <span>/ 192 max</span>
          </div>
        </div>
        <div class="modal-history" id="modal-history"></div>
        <div class="modal-danger-zone">
          <button class="btn-deactivate" id="btn-deactivate-athlete">
            Athlet deaktivieren
          </button>
        </div>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê TOAST ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="toast" class="toast"></div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="app.js"></script>
  </body>
</html>
